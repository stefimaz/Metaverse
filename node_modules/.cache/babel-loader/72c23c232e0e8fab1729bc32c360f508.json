{"ast":null,"code":"var _jsxFileName = \"/Users/stephanemasyn/Desktop/FinTech/GitHub/Metaverse/src/App.js\",\n    _s = $RefreshSig$();\n\nimport Web3 from 'web3';\nimport { Suspense, useState, useEffect } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { Sky, MapControls } from '@react-three/drei';\nimport { Physics } from '@react-three/cannon'; // Import CSS\n\nimport './App.css'; // Import Components\n\nimport Navbar from './components/Navbar';\nimport Plane from './components/Plane';\nimport Plot from './components/Plot';\nimport Building from './components/Building'; // Import ABI\n\nimport Land from './abis/Land.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [web3, setWeb3] = useState(null);\n  const [account, setAccount] = useState(null); // Contract & Contract States\n\n  const [landContract, setLandContract] = useState(null);\n  const [cost, setCost] = useState(0);\n  const [buildings, setBuildings] = useState(null);\n  const [landId, setLandId] = useState(null);\n  const [landName, setLandName] = useState(null);\n  const [landOwner, setLandOwner] = useState(null);\n  const [hasOwner, setHasOwner] = useState(false);\n\n  const loadBlockchainData = async () => {\n    if (typeof window.ethereum !== 'undefined') {\n      const web3 = new Web3(window.ethereum);\n      setWeb3(web3);\n      const accounts = await web3.eth.getAccounts();\n\n      if (accounts.length > 0) {\n        setAccount(accounts[0]);\n      }\n\n      const networkId = await web3.eth.net.getId();\n      const land = new web3.eth.Contract(Land.abi, Land.networks[networkId].address);\n      setLandContract(land);\n      const cost = await land.methods.cost().call();\n      setCost(web3.utils.fromWei(cost.toString(), 'ether'));\n      const buildings = await land.methods.getBuildings().call();\n      setBuildings(buildings); // Event listeners...\n\n      window.ethereum.on('accountsChanged', function (accounts) {\n        setAccount(accounts[0]);\n      });\n      window.ethereum.on('chainChanged', chainId => {\n        window.location.reload();\n      });\n    }\n  }; // MetaMask Login/Connect\n\n\n  const web3Handler = async () => {\n    if (web3) {\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      setAccount(accounts[0]);\n    }\n  };\n\n  useEffect(() => {\n    loadBlockchainData();\n  }, [account]);\n\n  const buyHandler = async _id => {\n    try {\n      await landContract.methods.mint(_id).send({\n        from: account,\n        value: '1000000000000000000'\n      });\n      const buildings = await landContract.methods.getBuildings().call();\n      setBuildings(buildings);\n      setLandName(buildings[_id - 1].name);\n      setLandOwner(buildings[_id - 1].owner);\n      setHasOwner(true);\n    } catch (error) {\n      window.alert('Error occurred when buying');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      web3Handler: web3Handler,\n      account: account\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Canvas, {\n      camera: {\n        position: [0, 0, 30],\n        up: [0, 0, 1],\n        far: 10000\n      },\n      children: [/*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: null,\n        children: [/*#__PURE__*/_jsxDEV(Sky, {\n          distance: 450000,\n          sunPosition: [1, 10, 0],\n          inclination: 0,\n          azimuth: 0.25\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"ambientLight\", {\n          intensity: 0.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Physics, {\n          children: buildings && buildings.map((building, index) => {\n            if (building.owner === '0x0000000000000000000000000000000000000000') {\n              return /*#__PURE__*/_jsxDEV(Plot, {\n                position: [building.posX, building.posY, 0.1],\n                size: [building.sizeX, building.sizeY],\n                landId: index + 1,\n                landInfo: building,\n                setLandName: setLandName,\n                setLandOwner: setLandOwner,\n                setHasOwner: setHasOwner,\n                setLandId: setLandId\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 10\n              }, this);\n            } else {\n              return /*#__PURE__*/_jsxDEV(Building, {\n                position: [building.posX, building.posY, 0.1],\n                size: [building.sizeX, building.sizeY, building.sizeZ],\n                landId: index + 1,\n                landInfo: building,\n                setLandName: setLandName,\n                setLandOwner: setLandOwner,\n                setHasOwner: setHasOwner,\n                setLandId: setLandId\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 10\n              }, this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Plane, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(MapControls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this), landId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"flex\",\n        children: landName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info--id\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: landId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info--owner\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Owner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: landOwner\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 7\n        }, this), !hasOwner && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info--owner\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: `${cost} ETH`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 6\n      }, this), !hasOwner && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => buyHandler(landId),\n        className: \"button info--buy\",\n        children: \"Buy Property\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"SrsqNEuay6SIZFr+TZB/xsKAO7Q=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/stephanemasyn/Desktop/FinTech/GitHub/Metaverse/src/App.js"],"names":["Web3","Suspense","useState","useEffect","Canvas","Sky","MapControls","Physics","Navbar","Plane","Plot","Building","Land","App","web3","setWeb3","account","setAccount","landContract","setLandContract","cost","setCost","buildings","setBuildings","landId","setLandId","landName","setLandName","landOwner","setLandOwner","hasOwner","setHasOwner","loadBlockchainData","window","ethereum","accounts","eth","getAccounts","length","networkId","net","getId","land","Contract","abi","networks","address","methods","call","utils","fromWei","toString","getBuildings","on","chainId","location","reload","web3Handler","request","method","buyHandler","_id","mint","send","from","value","name","owner","error","alert","position","up","far","map","building","index","posX","posY","sizeX","sizeY","sizeZ"],"mappings":"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","sourcesContent":["import Web3 from 'web3';\nimport { Suspense, useState, useEffect } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { Sky, MapControls } from '@react-three/drei';\nimport { Physics } from '@react-three/cannon';\n\n// Import CSS\nimport './App.css';\n\n// Import Components\nimport Navbar from './components/Navbar';\nimport Plane from './components/Plane';\nimport Plot from './components/Plot';\nimport Building from './components/Building';\n\n// Import ABI\nimport Land from './abis/Land.json';\n\nfunction App() {\n\tconst [web3, setWeb3] = useState(null)\n\tconst [account, setAccount] = useState(null)\n\n\t// Contract & Contract States\n\tconst [landContract, setLandContract] = useState(null)\n\n\tconst [cost, setCost] = useState(0)\n\tconst [buildings, setBuildings] = useState(null)\n\tconst [landId, setLandId] = useState(null)\n\tconst [landName, setLandName] = useState(null)\n\tconst [landOwner, setLandOwner] = useState(null)\n\tconst [hasOwner, setHasOwner] = useState(false)\n\n\tconst loadBlockchainData = async () => {\n\t\tif (typeof window.ethereum !== 'undefined') {\n\t\t\tconst web3 = new Web3(window.ethereum)\n\t\t\tsetWeb3(web3)\n\n\t\t\tconst accounts = await web3.eth.getAccounts()\n\n\t\t\tif (accounts.length > 0) {\n\t\t\t\tsetAccount(accounts[0])\n\t\t\t}\n\n\t\t\tconst networkId = await web3.eth.net.getId()\n\n\t\t\tconst land = new web3.eth.Contract(Land.abi, Land.networks[networkId].address)\n\t\t\tsetLandContract(land)\n\n\t\t\tconst cost = await land.methods.cost().call()\n\t\t\tsetCost(web3.utils.fromWei(cost.toString(), 'ether'))\n\n\t\t\tconst buildings = await land.methods.getBuildings().call()\n\t\t\tsetBuildings(buildings)\n\n\t\t\t// Event listeners...\n\t\t\twindow.ethereum.on('accountsChanged', function (accounts) {\n\t\t\t\tsetAccount(accounts[0])\n\t\t\t})\n\n\t\t\twindow.ethereum.on('chainChanged', (chainId) => {\n\t\t\t\twindow.location.reload();\n\t\t\t})\n\t\t}\n\t}\n\n\t// MetaMask Login/Connect\n\tconst web3Handler = async () => {\n\t\tif (web3) {\n\t\t\tconst accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n\t\t\tsetAccount(accounts[0])\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tloadBlockchainData()\n\t}, [account])\n\n\tconst buyHandler = async (_id) => {\n\t\ttry {\n\t\t\tawait landContract.methods.mint(_id).send({ from: account, value: '1000000000000000000' })\n\n\t\t\tconst buildings = await landContract.methods.getBuildings().call()\n\t\t\tsetBuildings(buildings)\n\n\t\t\tsetLandName(buildings[_id - 1].name)\n\t\t\tsetLandOwner(buildings[_id - 1].owner)\n\t\t\tsetHasOwner(true)\n\t\t} catch (error) {\n\t\t\twindow.alert('Error occurred when buying')\n\t\t}\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Navbar web3Handler={web3Handler} account={account} />\n\t\t\t<Canvas camera={{ position: [0, 0, 30], up: [0, 0, 1], far: 10000 }}>\n\t\t\t\t<Suspense fallback={null}>\n\t\t\t\t\t<Sky distance={450000} sunPosition={[1, 10, 0]} inclination={0} azimuth={0.25} />\n\n\t\t\t\t\t<ambientLight intensity={0.5} />\n\n\t\t\t\t\t{/* Load in each cell */}\n\t\t\t\t\t<Physics>\n\t\t\t\t\t\t{buildings && buildings.map((building, index) => {\n\t\t\t\t\t\t\tif (building.owner === '0x0000000000000000000000000000000000000000') {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Plot\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tposition={[building.posX, building.posY, 0.1]}\n\t\t\t\t\t\t\t\t\t\tsize={[building.sizeX, building.sizeY]}\n\t\t\t\t\t\t\t\t\t\tlandId={index + 1}\n\t\t\t\t\t\t\t\t\t\tlandInfo={building}\n\t\t\t\t\t\t\t\t\t\tsetLandName={setLandName}\n\t\t\t\t\t\t\t\t\t\tsetLandOwner={setLandOwner}\n\t\t\t\t\t\t\t\t\t\tsetHasOwner={setHasOwner}\n\t\t\t\t\t\t\t\t\t\tsetLandId={setLandId}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Building\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tposition={[building.posX, building.posY, 0.1]}\n\t\t\t\t\t\t\t\t\t\tsize={[building.sizeX, building.sizeY, building.sizeZ]}\n\t\t\t\t\t\t\t\t\t\tlandId={index + 1}\n\t\t\t\t\t\t\t\t\t\tlandInfo={building}\n\t\t\t\t\t\t\t\t\t\tsetLandName={setLandName}\n\t\t\t\t\t\t\t\t\t\tsetLandOwner={setLandOwner}\n\t\t\t\t\t\t\t\t\t\tsetHasOwner={setHasOwner}\n\t\t\t\t\t\t\t\t\t\tsetLandId={setLandId}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Physics>\n\n\t\t\t\t\t<Plane />\n\t\t\t\t</Suspense>\n\t\t\t\t<MapControls />\n\t\t\t</Canvas>\n\n\t\t\t{landId && (\n\t\t\t\t<div className=\"info\">\n\t\t\t\t\t<h1 className=\"flex\">{landName}</h1>\n\n\t\t\t\t\t<div className='flex-left'>\n\t\t\t\t\t\t<div className='info--id'>\n\t\t\t\t\t\t\t<h2>ID</h2>\n\t\t\t\t\t\t\t<p>{landId}</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='info--owner'>\n\t\t\t\t\t\t\t<h2>Owner</h2>\n\t\t\t\t\t\t\t<p>{landOwner}</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{!hasOwner && (\n\t\t\t\t\t\t\t<div className='info--owner'>\n\t\t\t\t\t\t\t\t<h2>Cost</h2>\n\t\t\t\t\t\t\t\t<p>{`${cost} ETH`}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!hasOwner && (\n\t\t\t\t\t\t<button onClick={() => buyHandler(landId)} className='button info--buy'>Buy Property</button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}