{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, CylinderGeometry, Matrix4 } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SpotLightMaterial } from '../materials/SpotLightMaterial.js';\nconst vec = new Vector3();\nconst SpotLight = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    opacity = 1,\n    radiusTop,\n    radiusBottom,\n    depthBuffer,\n    color = 'white',\n    distance = 5,\n    angle = 0.15,\n    attenuation = 5,\n    anglePower = 5,\n    ...props\n  } = _ref;\n  const mesh = React.useRef(null);\n  const size = useThree(state => state.size);\n  const camera = useThree(state => state.camera);\n  const dpr = useThree(state => state.viewport.dpr);\n  const [material] = React.useState(() => new SpotLightMaterial());\n  radiusTop = radiusTop === undefined ? 0.1 : radiusTop;\n  radiusBottom = radiusBottom === undefined ? angle * 7 : radiusBottom;\n  useFrame(() => {\n    material.uniforms.spotPosition.value.copy(mesh.current.getWorldPosition(vec));\n    mesh.current.lookAt(mesh.current.parent.target.getWorldPosition(vec));\n  });\n  const geom = React.useMemo(() => {\n    const geometry = new CylinderGeometry(radiusTop, radiusBottom, distance, 128, 64, true);\n    geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\n    geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\n    return geometry;\n  }, [angle, distance, radiusTop, radiusBottom]);\n  return /*#__PURE__*/React.createElement(\"spotLight\", _extends({\n    ref: ref,\n    angle: angle,\n    color: color,\n    distance: distance\n  }, props), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    geometry: geom,\n    raycast: () => null\n  }, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: material,\n    attach: \"material\",\n    \"uniforms-opacity-value\": opacity,\n    \"uniforms-lightColor-value\": color,\n    \"uniforms-attenuation-value\": attenuation,\n    \"uniforms-anglePower-value\": anglePower,\n    \"uniforms-depth-value\": depthBuffer,\n    \"uniforms-cameraNear-value\": camera.near,\n    \"uniforms-cameraFar-value\": camera.far,\n    \"uniforms-resolution-value\": depthBuffer ? [size.width * dpr, size.height * dpr] : [0, 0]\n  })));\n});\nexport { SpotLight };","map":{"version":3,"sources":["/Users/stephanemasyn/Desktop/FinTech/GitHub/Metaverse/node_modules/@react-three/drei/core/SpotLight.js"],"names":["_extends","React","Vector3","CylinderGeometry","Matrix4","useThree","useFrame","SpotLightMaterial","vec","SpotLight","forwardRef","ref","opacity","radiusTop","radiusBottom","depthBuffer","color","distance","angle","attenuation","anglePower","props","mesh","useRef","size","state","camera","dpr","viewport","material","useState","undefined","uniforms","spotPosition","value","copy","current","getWorldPosition","lookAt","parent","target","geom","useMemo","geometry","applyMatrix4","makeTranslation","makeRotationX","Math","PI","createElement","raycast","object","attach","near","far","width","height"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, CylinderGeometry, Matrix4 } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SpotLightMaterial } from '../materials/SpotLightMaterial.js';\n\nconst vec = new Vector3();\nconst SpotLight = /*#__PURE__*/React.forwardRef(({\n  opacity = 1,\n  radiusTop,\n  radiusBottom,\n  depthBuffer,\n  color = 'white',\n  distance = 5,\n  angle = 0.15,\n  attenuation = 5,\n  anglePower = 5,\n  ...props\n}, ref) => {\n  const mesh = React.useRef(null);\n  const size = useThree(state => state.size);\n  const camera = useThree(state => state.camera);\n  const dpr = useThree(state => state.viewport.dpr);\n  const [material] = React.useState(() => new SpotLightMaterial());\n  radiusTop = radiusTop === undefined ? 0.1 : radiusTop;\n  radiusBottom = radiusBottom === undefined ? angle * 7 : radiusBottom;\n  useFrame(() => {\n    material.uniforms.spotPosition.value.copy(mesh.current.getWorldPosition(vec));\n    mesh.current.lookAt(mesh.current.parent.target.getWorldPosition(vec));\n  });\n  const geom = React.useMemo(() => {\n    const geometry = new CylinderGeometry(radiusTop, radiusBottom, distance, 128, 64, true);\n    geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\n    geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\n    return geometry;\n  }, [angle, distance, radiusTop, radiusBottom]);\n  return /*#__PURE__*/React.createElement(\"spotLight\", _extends({\n    ref: ref,\n    angle: angle,\n    color: color,\n    distance: distance\n  }, props), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    geometry: geom,\n    raycast: () => null\n  }, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: material,\n    attach: \"material\",\n    \"uniforms-opacity-value\": opacity,\n    \"uniforms-lightColor-value\": color,\n    \"uniforms-attenuation-value\": attenuation,\n    \"uniforms-anglePower-value\": anglePower,\n    \"uniforms-depth-value\": depthBuffer,\n    \"uniforms-cameraNear-value\": camera.near,\n    \"uniforms-cameraFar-value\": camera.far,\n    \"uniforms-resolution-value\": depthBuffer ? [size.width * dpr, size.height * dpr] : [0, 0]\n  })));\n});\n\nexport { SpotLight };\n"]},"metadata":{},"sourceType":"module"}