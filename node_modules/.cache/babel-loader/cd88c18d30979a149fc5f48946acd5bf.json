{"ast":null,"code":"import { GLTFLoader } from '../loaders/GLTFLoader.js';\nconst DEFAULT_HAND_PROFILE_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/';\n\nclass XRHandMeshModel {\n  constructor(handModel, controller, path, handedness) {\n    this.controller = controller;\n    this.handModel = handModel;\n    this.bones = [];\n    const loader = new GLTFLoader();\n    loader.setPath(path || DEFAULT_HAND_PROFILE_PATH);\n    loader.load(`${handedness}.glb`, gltf => {\n      const object = gltf.scene.children[0];\n      this.handModel.add(object);\n      const mesh = object.getObjectByProperty('type', 'SkinnedMesh');\n      mesh.frustumCulled = false;\n      mesh.castShadow = true;\n      mesh.receiveShadow = true;\n      const joints = ['wrist', 'thumb-metacarpal', 'thumb-phalanx-proximal', 'thumb-phalanx-distal', 'thumb-tip', 'index-finger-metacarpal', 'index-finger-phalanx-proximal', 'index-finger-phalanx-intermediate', 'index-finger-phalanx-distal', 'index-finger-tip', 'middle-finger-metacarpal', 'middle-finger-phalanx-proximal', 'middle-finger-phalanx-intermediate', 'middle-finger-phalanx-distal', 'middle-finger-tip', 'ring-finger-metacarpal', 'ring-finger-phalanx-proximal', 'ring-finger-phalanx-intermediate', 'ring-finger-phalanx-distal', 'ring-finger-tip', 'pinky-finger-metacarpal', 'pinky-finger-phalanx-proximal', 'pinky-finger-phalanx-intermediate', 'pinky-finger-phalanx-distal', 'pinky-finger-tip'];\n      joints.forEach(jointName => {\n        const bone = object.getObjectByName(jointName);\n\n        if (bone !== undefined) {\n          bone.jointName = jointName;\n        } else {\n          console.warn(`Couldn't find ${jointName} in ${handedness} hand mesh`);\n        }\n\n        this.bones.push(bone);\n      });\n    });\n  }\n\n  updateMesh() {\n    // XR Joints\n    const XRJoints = this.controller.joints;\n\n    for (let i = 0; i < this.bones.length; i++) {\n      const bone = this.bones[i];\n\n      if (bone) {\n        const XRJoint = XRJoints[bone.jointName];\n\n        if (XRJoint.visible) {\n          const position = XRJoint.position;\n          bone.position.copy(position);\n          bone.quaternion.copy(XRJoint.quaternion); // bone.scale.setScalar( XRJoint.jointRadius || defaultRadius );\n        }\n      }\n    }\n  }\n\n}\n\nexport { XRHandMeshModel };","map":{"version":3,"sources":["/Users/stephanemasyn/Desktop/FinTech/GitHub/Metaverse/node_modules/three-stdlib/webxr/XRHandMeshModel.js"],"names":["GLTFLoader","DEFAULT_HAND_PROFILE_PATH","XRHandMeshModel","constructor","handModel","controller","path","handedness","bones","loader","setPath","load","gltf","object","scene","children","add","mesh","getObjectByProperty","frustumCulled","castShadow","receiveShadow","joints","forEach","jointName","bone","getObjectByName","undefined","console","warn","push","updateMesh","XRJoints","i","length","XRJoint","visible","position","copy","quaternion"],"mappings":"AAAA,SAASA,UAAT,QAA2B,0BAA3B;AAEA,MAAMC,yBAAyB,GAAG,2FAAlC;;AAEA,MAAMC,eAAN,CAAsB;AACpBC,EAAAA,WAAW,CAACC,SAAD,EAAYC,UAAZ,EAAwBC,IAAxB,EAA8BC,UAA9B,EAA0C;AACnD,SAAKF,UAAL,GAAkBA,UAAlB;AACA,SAAKD,SAAL,GAAiBA,SAAjB;AACA,SAAKI,KAAL,GAAa,EAAb;AACA,UAAMC,MAAM,GAAG,IAAIT,UAAJ,EAAf;AACAS,IAAAA,MAAM,CAACC,OAAP,CAAeJ,IAAI,IAAIL,yBAAvB;AACAQ,IAAAA,MAAM,CAACE,IAAP,CAAa,GAAEJ,UAAW,MAA1B,EAAiCK,IAAI,IAAI;AACvC,YAAMC,MAAM,GAAGD,IAAI,CAACE,KAAL,CAAWC,QAAX,CAAoB,CAApB,CAAf;AACA,WAAKX,SAAL,CAAeY,GAAf,CAAmBH,MAAnB;AACA,YAAMI,IAAI,GAAGJ,MAAM,CAACK,mBAAP,CAA2B,MAA3B,EAAmC,aAAnC,CAAb;AACAD,MAAAA,IAAI,CAACE,aAAL,GAAqB,KAArB;AACAF,MAAAA,IAAI,CAACG,UAAL,GAAkB,IAAlB;AACAH,MAAAA,IAAI,CAACI,aAAL,GAAqB,IAArB;AACA,YAAMC,MAAM,GAAG,CAAC,OAAD,EAAU,kBAAV,EAA8B,wBAA9B,EAAwD,sBAAxD,EAAgF,WAAhF,EAA6F,yBAA7F,EAAwH,+BAAxH,EAAyJ,mCAAzJ,EAA8L,6BAA9L,EAA6N,kBAA7N,EAAiP,0BAAjP,EAA6Q,gCAA7Q,EAA+S,oCAA/S,EAAqV,8BAArV,EAAqX,mBAArX,EAA0Y,wBAA1Y,EAAoa,8BAApa,EAAoc,kCAApc,EAAwe,4BAAxe,EAAsgB,iBAAtgB,EAAyhB,yBAAzhB,EAAojB,+BAApjB,EAAqlB,mCAArlB,EAA0nB,6BAA1nB,EAAypB,kBAAzpB,CAAf;AACAA,MAAAA,MAAM,CAACC,OAAP,CAAeC,SAAS,IAAI;AAC1B,cAAMC,IAAI,GAAGZ,MAAM,CAACa,eAAP,CAAuBF,SAAvB,CAAb;;AAEA,YAAIC,IAAI,KAAKE,SAAb,EAAwB;AACtBF,UAAAA,IAAI,CAACD,SAAL,GAAiBA,SAAjB;AACD,SAFD,MAEO;AACLI,UAAAA,OAAO,CAACC,IAAR,CAAc,iBAAgBL,SAAU,OAAMjB,UAAW,YAAzD;AACD;;AAED,aAAKC,KAAL,CAAWsB,IAAX,CAAgBL,IAAhB;AACD,OAVD;AAWD,KAnBD;AAoBD;;AAEDM,EAAAA,UAAU,GAAG;AACX;AACA,UAAMC,QAAQ,GAAG,KAAK3B,UAAL,CAAgBiB,MAAjC;;AAEA,SAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzB,KAAL,CAAW0B,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,YAAMR,IAAI,GAAG,KAAKjB,KAAL,CAAWyB,CAAX,CAAb;;AAEA,UAAIR,IAAJ,EAAU;AACR,cAAMU,OAAO,GAAGH,QAAQ,CAACP,IAAI,CAACD,SAAN,CAAxB;;AAEA,YAAIW,OAAO,CAACC,OAAZ,EAAqB;AACnB,gBAAMC,QAAQ,GAAGF,OAAO,CAACE,QAAzB;AACAZ,UAAAA,IAAI,CAACY,QAAL,CAAcC,IAAd,CAAmBD,QAAnB;AACAZ,UAAAA,IAAI,CAACc,UAAL,CAAgBD,IAAhB,CAAqBH,OAAO,CAACI,UAA7B,EAHmB,CAGuB;AAC3C;AACF;AACF;AACF;;AA9CmB;;AAkDtB,SAASrC,eAAT","sourcesContent":["import { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nconst DEFAULT_HAND_PROFILE_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/';\n\nclass XRHandMeshModel {\n  constructor(handModel, controller, path, handedness) {\n    this.controller = controller;\n    this.handModel = handModel;\n    this.bones = [];\n    const loader = new GLTFLoader();\n    loader.setPath(path || DEFAULT_HAND_PROFILE_PATH);\n    loader.load(`${handedness}.glb`, gltf => {\n      const object = gltf.scene.children[0];\n      this.handModel.add(object);\n      const mesh = object.getObjectByProperty('type', 'SkinnedMesh');\n      mesh.frustumCulled = false;\n      mesh.castShadow = true;\n      mesh.receiveShadow = true;\n      const joints = ['wrist', 'thumb-metacarpal', 'thumb-phalanx-proximal', 'thumb-phalanx-distal', 'thumb-tip', 'index-finger-metacarpal', 'index-finger-phalanx-proximal', 'index-finger-phalanx-intermediate', 'index-finger-phalanx-distal', 'index-finger-tip', 'middle-finger-metacarpal', 'middle-finger-phalanx-proximal', 'middle-finger-phalanx-intermediate', 'middle-finger-phalanx-distal', 'middle-finger-tip', 'ring-finger-metacarpal', 'ring-finger-phalanx-proximal', 'ring-finger-phalanx-intermediate', 'ring-finger-phalanx-distal', 'ring-finger-tip', 'pinky-finger-metacarpal', 'pinky-finger-phalanx-proximal', 'pinky-finger-phalanx-intermediate', 'pinky-finger-phalanx-distal', 'pinky-finger-tip'];\n      joints.forEach(jointName => {\n        const bone = object.getObjectByName(jointName);\n\n        if (bone !== undefined) {\n          bone.jointName = jointName;\n        } else {\n          console.warn(`Couldn't find ${jointName} in ${handedness} hand mesh`);\n        }\n\n        this.bones.push(bone);\n      });\n    });\n  }\n\n  updateMesh() {\n    // XR Joints\n    const XRJoints = this.controller.joints;\n\n    for (let i = 0; i < this.bones.length; i++) {\n      const bone = this.bones[i];\n\n      if (bone) {\n        const XRJoint = XRJoints[bone.jointName];\n\n        if (XRJoint.visible) {\n          const position = XRJoint.position;\n          bone.position.copy(position);\n          bone.quaternion.copy(XRJoint.quaternion); // bone.scale.setScalar( XRJoint.jointRadius || defaultRadius );\n        }\n      }\n    }\n  }\n\n}\n\nexport { XRHandMeshModel };\n"]},"metadata":{},"sourceType":"module"}